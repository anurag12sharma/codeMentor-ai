<% let body = `
<div class="hero-section bg-gradient-primary text-white py-5 mb-5">
  <div class="container">
    <div class="row align-items-center">
      <div class="col-lg-8">
        <div class="hero-content">
          <div class="hero-badge feature-pill mb-3">
            <i class="bi bi-stars"></i> AI-Powered Competitive Programming
          </div>
          <h1 class="display-3 fw-bold mb-4">
            <i class="bi bi-robot"></i> CodeMentor AI
          </h1>
          <p class="hero-subtitle mb-4">
            Your intelligent competitive programming companion with real-time
            contest tracking, AI-powered recommendations, and smart reminders.
          </p>
          <div class="hero-features mb-4">
            <div class="feature-pill">
              <i class="bi bi-lightning-charge"></i> Real-time Updates
            </div>
            <div class="feature-pill">
              <i class="bi bi-flower2"></i> AI Recommendations
            </div>
            <div class="feature-pill">
              <i class="bi bi-calendar-check"></i> Smart Scheduling
            </div>
          </div>
          <div class="hero-stats">
            <div class="stat-item">
              <i class="bi bi-circle-fill text-success"></i>
              <span>Bot Status: ${botStats.status}</span>
            </div>
            <div class="stat-item">
              <i class="bi bi-clock text-info"></i>
              <span>Uptime: ${botStats.uptime} minutes</span>
            </div>
          </div>
        </div>
      </div>
      <div class="col-lg-4 text-center">
        <div class="dashboard-card bot-stats-card">
          <div class="stats-header">
            <i class="bi bi-graph-up-arrow"></i>
            <h4>Live Statistics</h4>
          </div>
          <div class="stats-grid">
            <div class="stat-box">
              <div class="stat-icon">
                <i class="bi bi-server"></i>
              </div>
              <div class="stat-content">
                <div class="stat-number">${botStats.guilds}</div>
                <div class="stat-label">Active Servers</div>
              </div>
            </div>
            <div class="stat-box">
              <div class="stat-icon">
                <i class="bi bi-people"></i>
              </div>
              <div class="stat-content">
                <div class="stat-number">${botStats.users}</div>
                <div class="stat-label">Total Users</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="container">
  <!-- Running Contests -->
  ${runningContests.length > 0 ? `
  <div class="dashboard-card">
    <div class="row">
      <div class="col-12">
        <h2 class="section-title">
          <i class="bi bi-broadcast text-danger"></i> Currently Running
        </h2>
      </div>
      ${runningContests.map(contest => `
      <div class="col-md-6 mb-3">
        <div class="card contest-card border-danger">
          <div class="card-body">
            <div class="d-flex justify-content-between align-items-start">
              <div>
                <h5 class="card-title">${contest.name}</h5>
                <p class="card-text">
                  <span class="badge bg-danger">LIVE</span>
                  <span class="badge bg-secondary">${contest.platform}</span>
                </p>
                <p class="card-text">
                  <i class="bi bi-clock"></i> ${contest.getTimeUntilEnd() > 0 ?
                  Math.floor(contest.getTimeUntilEnd() / 60) + ' hours left' :
                  'Ending soon'}
                </p>
              </div>
              <a
                href="${contest.url}"
                target="_blank"
                class="btn btn-danger btn-sm"
              >
                <i class="bi bi-box-arrow-up-right"></i> Join
              </a>
            </div>
          </div>
        </div>
      </div>
      `).join('')}
    </div>
  </div>
  ` : ''}
  <!-- Upcoming Contests -->
  <div class="dashboard-card">
    <div class="row">
      <div class="col-12">
        <div class="section-header">
          <h2 class="section-title">
            <i class="bi bi-calendar-week"></i> Upcoming Contests
          </h2>
          <p class="section-subtitle">
            Plan your competitive programming journey with upcoming contests
          </p>
        </div>
      </div>
      ${contests.slice(0, 6).map((contest, index) => `
      <div class="col-lg-4 col-md-6 mb-4">
        <div class="card contest-card h-100">
          <div class="card-body">
            <div class="d-flex justify-content-between align-items-start mb-3">
              <span class="badge bg-primary">${contest.platform}</span>
              <span
                class="badge ${contest.difficulty === 'Beginner' ? 'bg-success' : contest.difficulty === 'Expert' ? 'bg-danger' : 'bg-warning'}"
                >${contest.difficulty}</span
              >
            </div>
            <h5 class="card-title">${contest.name}</h5>
            <p class="card-text">
              <i class="bi bi-clock"></i> ${contest.getRelativeTime()}<br />
              <i class="bi bi-hourglass-split"></i>
              ${contest.getFormattedDuration()}
            </p>
          </div>
          <div class="card-footer">
            <a
              href="${contest.url}"
              target="_blank"
              class="btn btn-outline-primary btn-sm"
            >
              <i class="bi bi-box-arrow-up-right"></i> View Contest
            </a>
          </div>
        </div>
      </div>
      `).join('')}
    </div>
  </div>

  <!-- Contest Statistics -->
  <div class="dashboard-card">
    <div class="row">
      <div class="col-12">
        <h2 class="section-title">
          <i class="bi bi-graph-up"></i> Contest Overview
        </h2>
      </div>
      <div class="col-md-3 mb-3">
        <div class="card stats-card text-center">
          <div class="card-body">
            <i class="bi bi-calendar-event stats-icon text-primary"></i>
            <h3 class="card-title">${stats.total}</h3>
            <p class="card-text">Total Contests</p>
          </div>
        </div>
      </div>
      <div class="col-md-3 mb-3">
        <div class="card stats-card text-center">
          <div class="card-body">
            <i class="bi bi-calendar-plus stats-icon text-success"></i>
            <h3 class="card-title">${stats.upcoming}</h3>
            <p class="card-text">Upcoming</p>
          </div>
        </div>
      </div>
      <div class="col-md-3 mb-3">
        <div class="card stats-card text-center">
          <div class="card-body">
            <i class="bi bi-play-circle stats-icon text-danger"></i>
            <h3 class="card-title">${stats.running}</h3>
            <p class="card-text">Running Now</p>
          </div>
        </div>
      </div>
      <div class="col-md-3 mb-3">
        <div class="card stats-card text-center">
          <div class="card-body">
            <i class="bi bi-building stats-icon text-info"></i>
            <h3 class="card-title">${Object.keys(stats.platforms).length}</h3>
            <p class="card-text">Platforms</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Platform Breakdown -->
  <div class="dashboard-card">
    <div class="row">
      <div class="col-12">
        <div class="section-header">
          <h2 class="section-title">
            <i class="bi bi-pie-chart"></i> Platform Distribution
          </h2>
          <p class="section-subtitle">
            Contest distribution across major competitive programming platforms
          </p>
        </div>
      </div>
      ${Object.entries(stats.platforms).map(([platform, count]) => `
      <div class="col-md-3 mb-3">
        <div class="card stats-card text-center">
          <div class="card-body text-center">
            <h4>${platform}</h4>
            <div class="platform-count">${count}</div>
            <small class="text-muted">contests</small>
          </div>
        </div>
      </div>
      `).join('')}
    </div>
  </div>

  <div class="container mb-4">
    <div class="row">
      <div class="col-12">
        <div
          class="hero-section bg-gradient-primary card bg-primary text-white"
        >
          <div class="card-body text-center">
            <h4 class="card-title">
              <i class="bi bi-discord"></i> Add CodeMentor AI to Your Server
            </h4>
            <p class="card-text">
              Get real-time contest notifications, AI recommendations, and more!
            </p>
            <div class="d-flex gap-3 justify-content-center flex-wrap mb-3">
              <a
                href="https://discord.com/oauth2/authorize?client_id=1408136900438528000&scope=bot+applications.commands&permissions=268954752"
                target="_blank"
                class="btn btn-light btn-lg"
              >
                <i class="bi bi-plus-circle"></i> Invite to Server
              </a>
              <a
                href="https://discord.gg/kgJ7Y5mUcG"
                target="_blank"
                class="btn btn-warning btn-lg"
              >
                <i class="bi bi-chat-dots"></i> Join Support Server
              </a>
            </div>
            <small class="d-block mt-2">
              <i class="bi bi-shield-check"></i> Secure & Privacy-Focused
            </small>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
`; %> <%- include('layout', { body: body }) %>
